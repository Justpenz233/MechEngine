cmake_minimum_required(VERSION 3.5)
if (CMAKE_VERSION VERSION_LESS "3")
  project(json11 CXX)
else()
  cmake_policy(SET CMP0048 NEW)
  project(json11 VERSION 1.0.0 LANGUAGES CXX)
endif()

cmake_policy(SET CMP0077 NEW)

if(CMAKE_VERSION VERSION_LESS "3")
  add_definitions(-std=c++11)
else()
  set(CMAKE_CXX_STANDARD 11)
  set(CMAKE_CXX_STANDARD_REQUIRED ON)
endif()

add_library(json11 SHARED json11.cpp)
target_include_directories(json11 PUBLIC ${CMAKE_CURRENT_SOURCE_DIR})
set_target_properties(json11 PROPERTIES WINDOWS_EXPORT_ALL_SYMBOLS TRUE)
if (MSVC)
  target_compile_options(json11 PRIVATE -W0)
else ()
  target_compile_options(json11 PRIVATE -w)
endif()